imageOpacityVine=function(e,t,n,r,i,s,o,u,a){function f(r,i){return i=r[e]=r[e]||t++,n[i]||(n[i]={b:{},e:{}})}function l(e){return e.charAt?o.getElementById(e):e}return u={d:f,id:l,Event:a=function(e,t,n){n=this;for(t in e)n[t]=n[t]||e[t];n.timestamp=+(new Date),n.target||(n.target=n.srcElement)},bind:function(e,t,n,o,a,c,p,v){if((v=(p=t.split(" ")).length)>1)while(v--)u.bind(e,p[v],n);else{e=l(e),a=f(e);if(c=/^(.+)\.([^\.]+)$/.exec(t))t=c[2],c=c[1];(a.e[t]||(a.e[t]=[])).push({n:c,f:n,d:o||{}}),!a.b[t]&&(a.b[t]=1,e[i]?e[i](t,function(n){u.trigger(e,t,n)[r]&&n.preventDefault()},null):e[s]("on"+t,function(){return!u.trigger(e,t,window.event)[r]}))}},trigger:function(e,t,n,i,s,u,c,h,p){e=l(e);if(!n&&e.nodeType){if(!e.fireEvent)return c=o.createEvent((init=/click|mousedown|mouseup|mousemove/.test(t))?"MouseEvents":"HTMLEvents"),c[init?"initMouseEvent":"initEvent"](t,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(c),c;try{return new a({defaultPrevented:e[t==="click"?t:fireEvent]("on"+t)})}catch(v){}}c=new a(n||{});if(i=f(e).e[t]){for(s=0,u=i.length;s<u;s++)if(p=i[s])c.namespace=p.n,c.data=p.d,h=h||p.f.call(e,c)===!1;c[r]=c[r]||h}return c},unbind:function(t,r,i,s,o,u,a){t=l(t);if(!r)return n[t[e]]=t[e]=null;i=f(t);if(r.charAt)if(r.charAt(0)==="."){r=r.substring(1);for(o in i.e){a=i.e[o],u=a.length;for(s=0;s<u;s++)a[s].n===r&&(a[s]=null)}}else i.e[r]=[];else for(o in i.e){a=i.e[o],u=a.length;for(s=0;s<u;s++)a[s].f===r&&(a[s]=null)}}},a.prototype={defaultPrevented:!1,preventDefault:function(){this[r]=!0}},u}(+(new Date),1,{},"defaultPrevented","addEventListener","attachEvent",document);var gui=gui||{};(function(){gui.ImageOpacitySlider=function(){};gui.ImageOpacitySlider.prototype={beingDragged:false,dragIntervalID:null,dragLeftBounds:null,dragRightBounds:null,dragPrevX:null,changeOpacityStep:false,holderWidth:null,init:function(e,t,n){var r="ontouchend"in document;var i="ondragend"in document;this.holder=document.createElement("div");this.holder.style.position="relative";if(n){this.holder.style.width=n+"px"}this.holder.style.maxWidth="100%";this.holder.style.overflow="hidden";var s=document.createElement("img");s.src=e;s.style.width="100%";s.style.height="auto";this.holder.appendChild(s);this.secondImage=document.createElement("img");this.secondImage.src=t;this.secondImage.style.width="100%";this.secondImage.style.height="auto";this.secondImage.style.position="absolute";this.secondImage.style.top=0;this.secondImage.style.left=0;this.holder.appendChild(this.secondImage);var o=document.createElement("div");if(n){o.style.width=n+"px"}o.style.padding="10px 0";o.style.position="relative";this.holder.appendChild(o);this.sliderBg=document.createElement("div");this.sliderBg.style.backgroundColor="#cdcdcd";this.sliderBg.style.width="100%";this.sliderBg.style.height="5px";o.appendChild(this.sliderBg);this.grabberHolder=document.createElement("div");this.grabberHolder.style.width="100px";this.grabberHolder.style.height="100px";this.grabberHolder.style.position="absolute";this.grabberHolder.style.top="-35px";this.grabberHolder.style.left="-41px";o.appendChild(this.grabberHolder);this.sliderGrabber=document.createElement("div");this.sliderGrabber.style.position="absolute";this.sliderGrabber.style.top="39px";this.sliderGrabber.style.left="50%";this.sliderGrabber.style.marginLeft="-9px";this.sliderGrabber.style.backgroundColor="#fff";this.sliderGrabber.style.width=this.sliderGrabber.style.height="15px";this.sliderGrabber.style.border="1px solid #999";this.sliderGrabber.style.borderRadius="5px";this.grabberHolder.appendChild(this.sliderGrabber);if(r){this.grabberHolder.style.left="-32px";this.sliderGrabber.style.width=this.sliderGrabber.style.height="30px";this.sliderGrabber.style.marginLeft="-18px";this.sliderGrabber.style.top="30px";o.style.marginTop="5px";this.holder.style.paddingBottom="5px"}var u=document.getElementById("imageOpacitySlider").parentNode;u.appendChild(this.holder);this.holderWidth=this.holder.clientWidth;var a=this.grabberHolder.getBoundingClientRect();this.dragLeftBounds=r?-32:-41;this.dragRightBounds=this.dragLeftBounds+(this.holderWidth-(this.sliderGrabber.clientWidth+2));var f={thisRef:this};if(r){imageOpacityVine.bind(this.grabberHolder,"touchstart",this.handleGrabberTouchstart,f);imageOpacityVine.bind(document,"touchend",this.handleGrabberTouchend,f)}else{imageOpacityVine.bind(this.grabberHolder,"mousedown",this.handleGrabberMouseDown,f);imageOpacityVine.bind(document,"mouseup",this.handleGrabberMouseUp,f)}imageOpacityVine.bind(window,"resize",this.handleWindowResize,f)},handleGrabberMouseDown:function(e){e.preventDefault();if(!e.data.thisRef.beingDragged){e.data.thisRef.beingDragged=true;e.data.thisRef.dragPrevX=e.pageX;imageOpacityVine.bind(document,"mousemove",e.data.thisRef.updateGrabberMove,e.data)}},updateGrabberMove:function(e){var t=e.data.thisRef.grabberHolder;var n=e.pageX;var r=n-e.data.thisRef.dragPrevX;var i=+e.data.thisRef.grabberHolder.style.left.replace(/[^-0-9\.]/g,"");var s=i+r;if(s<e.data.thisRef.dragLeftBounds){s=e.data.thisRef.dragLeftBounds}else if(s>e.data.thisRef.dragRightBounds){s=e.data.thisRef.dragRightBounds}e.data.thisRef.grabberHolder.style.left=s+"px";e.data.thisRef.dragPrevX=n;var o=Math.abs((s-e.data.thisRef.dragLeftBounds)/(e.data.thisRef.dragRightBounds-e.data.thisRef.dragLeftBounds)-1);e.data.thisRef.secondImage.style.opacity=o},handleGrabberMouseUp:function(e){imageOpacityVine.unbind(document,"mousemove",e.data.thisRef.updateGrabberMove);e.data.thisRef.beingDragged=false},handleGrabberTouchstart:function(e){e.preventDefault();if(!e.data.thisRef.beingDragged&&e.touches.length===1){e.data.thisRef.beingDragged=true;var t=e.touches[0];e.data.thisRef.dragPrevX=t.pageX;imageOpacityVine.bind(document,"touchmove",e.data.thisRef.handleGrabberTouchmove,e.data)}},handleGrabberTouchmove:function(e){if(e.data.thisRef.changeOpacityStep){var t=e.data.thisRef.grabberHolder;var n=e.touches[0];var r=n.pageX;var i=r-e.data.thisRef.dragPrevX;var s=+e.data.thisRef.grabberHolder.style.left.replace(/[^-0-9\.]/g,"");var o=s+i;if(o<e.data.thisRef.dragLeftBounds){o=e.data.thisRef.dragLeftBounds}else if(o>e.data.thisRef.dragRightBounds){o=e.data.thisRef.dragRightBounds}e.data.thisRef.grabberHolder.style.left=o+"px";e.data.thisRef.dragPrevX=r;var u=Math.abs((o-e.data.thisRef.dragLeftBounds)/(e.data.thisRef.dragRightBounds-e.data.thisRef.dragLeftBounds)-1);e.data.thisRef.secondImage.style.opacity=u;e.data.thisRef.changeOpacityStep=false}else{e.data.thisRef.changeOpacityStep=true}},handleGrabberTouchend:function(e){imageOpacityVine.unbind(document,"touchmove",e.data.thisRef.handleGrabberTouchmove);e.data.thisRef.beingDragged=false},handleWindowResize:function(e){if(e.data.thisRef.holder.clientWidth!==e.data.thisRef.holderWidth){e.data.thisRef.holderWidth=e.data.thisRef.holder.clientWidth;e.data.thisRef.dragRightBounds=e.data.thisRef.dragLeftBounds+(e.data.thisRef.holderWidth-(e.data.thisRef.sliderGrabber.clientWidth+2));var t=e.data.thisRef.dragRightBounds-e.data.thisRef.dragLeftBounds;var n=Math.abs(1-e.data.thisRef.secondImage.style.opacity);e.data.thisRef.grabberHolder.style.left=e.data.thisRef.dragLeftBounds+t*n+"px"}}}})()