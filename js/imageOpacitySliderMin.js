imageOpacityVine=function(e,t,n,r,i,s,o,u,a){function f(r,i){return i=r[e]=r[e]||t++,n[i]||(n[i]={b:{},e:{}})}function l(e){return e.charAt?o.getElementById(e):e}return u={d:f,id:l,Event:a=function(e,t,n){n=this;for(t in e)n[t]=n[t]||e[t];n.timestamp=+(new Date),n.target||(n.target=n.srcElement)},bind:function(e,t,n,o,a,c,p,v){if((v=(p=t.split(" ")).length)>1)while(v--)u.bind(e,p[v],n);else{e=l(e),a=f(e);if(c=/^(.+)\.([^\.]+)$/.exec(t))t=c[2],c=c[1];(a.e[t]||(a.e[t]=[])).push({n:c,f:n,d:o||{}}),!a.b[t]&&(a.b[t]=1,e[i]?e[i](t,function(n){u.trigger(e,t,n)[r]&&n.preventDefault()},null):e[s]("on"+t,function(){return!u.trigger(e,t,window.event)[r]}))}},trigger:function(e,t,n,i,s,u,c,h,p){e=l(e);if(!n&&e.nodeType){if(!e.fireEvent)return c=o.createEvent((init=/click|mousedown|mouseup|mousemove/.test(t))?"MouseEvents":"HTMLEvents"),c[init?"initMouseEvent":"initEvent"](t,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(c),c;try{return new a({defaultPrevented:e[t==="click"?t:fireEvent]("on"+t)})}catch(v){}}c=new a(n||{});if(i=f(e).e[t]){for(s=0,u=i.length;s<u;s++)if(p=i[s])c.namespace=p.n,c.data=p.d,h=h||p.f.call(e,c)===!1;c[r]=c[r]||h}return c},unbind:function(t,r,i,s,o,u,a){t=l(t);if(!r)return n[t[e]]=t[e]=null;i=f(t);if(r.charAt)if(r.charAt(0)==="."){r=r.substring(1);for(o in i.e){a=i.e[o],u=a.length;for(s=0;s<u;s++)a[s].n===r&&(a[s]=null)}}else i.e[r]=[];else for(o in i.e){a=i.e[o],u=a.length;for(s=0;s<u;s++)a[s].f===r&&(a[s]=null)}}},a.prototype={defaultPrevented:!1,preventDefault:function(){this[r]=!0}},u}(+(new Date),1,{},"defaultPrevented","addEventListener","attachEvent",document);var gui=gui||{};(function(){gui.ImageOpacitySlider=function(){};gui.ImageOpacitySlider.prototype={beingDragged:false,dragIntervalID:null,dragLeftBounds:null,dragRightBounds:null,dragPrevX:null,changeOpacityStep:false,holderWidth:null,holderLeft:null,intervalID:null,animateTargetOpacity:1,animationStepChange:.05,init:function(e,t,n){var r="ontouchend"in document;var i="ondragend"in document;this.holder=document.createElement("div");this.holder.style.position="relative";if(n){this.holder.style.width=n+"px"}this.holder.style.maxWidth="100%";this.holder.style.overflow="hidden";var s=document.createElement("img");s.src=e;s.style.width="100%";s.style.height="auto";this.holder.appendChild(s);this.secondImage=document.createElement("img");this.secondImage.src=t;this.secondImage.style.width="100%";this.secondImage.style.height="auto";this.secondImage.style.opacity=1;this.secondImage.style.position="absolute";this.secondImage.style.top=0;this.secondImage.style.left=0;this.holder.appendChild(this.secondImage);var o=document.createElement("div");if(n){o.style.width=n+"px"}o.style.padding="10px 0";o.style.position="relative";this.holder.appendChild(o);this.sliderBg=document.createElement("div");this.sliderBg.style.backgroundColor="#cdcdcd";this.sliderBg.style.width="100%";this.sliderBg.style.height="2px";o.appendChild(this.sliderBg);this.grabberHolder=document.createElement("div");this.grabberHolder.style.width="100px";this.grabberHolder.style.height="100px";this.grabberHolder.style.position="absolute";this.grabberHolder.style.top="-35px";this.grabberHolder.style.left="-41px";o.appendChild(this.grabberHolder);this.sliderGrabber=document.createElement("div");this.sliderGrabber.style.position="absolute";this.sliderGrabber.style.top="37px";this.sliderGrabber.style.left="50%";this.sliderGrabber.style.marginLeft="-9px";this.sliderGrabber.style.backgroundColor="#fff";this.sliderGrabber.style.width=this.sliderGrabber.style.height="15px";this.sliderGrabber.style.border="1px solid #999";this.sliderGrabber.style.borderRadius="10px";this.grabberHolder.appendChild(this.sliderGrabber);if(r){this.grabberHolder.style.left="-32px";this.sliderGrabber.style.width=this.sliderGrabber.style.height="20px";this.sliderGrabber.style.marginLeft="-18px";this.sliderGrabber.style.top="35px";o.style.marginTop="5px";this.sliderGrabber.style.borderRadius="15px";this.holder.style.paddingBottom="5px"}var u=document.createElement("div");u.style.margin="10px 0px";u.style.position="relative";this.holder.appendChild(u);var a=document.createElement("span");a.style.fontSize="12px";a.style.fontFamily="Helvetica, Arial, sans";a.style.color="#999";a.style.backgroundColor="#fff";a.style.padding="4px 8px";a.style.border="1px solid #999";a.style.borderRadius="3px";a.style.cssFloat="left";a.style.cursor="pointer";a.innerHTML="1912";u.appendChild(a);var f=document.createElement("span");f.style.fontSize="12px";f.style.fontFamily="Helvetica, Arial, sans";f.style.color="#999";f.style.backgroundColor="#fff";f.style.padding="4px 8px";f.style.border="1px solid #999";f.style.borderRadius="3px";f.style.cssFloat="right";f.style.cursor="pointer";f.innerHTML="2013";u.appendChild(f);var l=document.getElementById("imageOpacitySlider").parentNode;l.appendChild(this.holder);this.holderWidth=this.holder.clientWidth;this.holderLeft=this.holder.getBoundingClientRect().left;var c=this.grabberHolder.getBoundingClientRect();this.dragLeftBounds=r?-32:-41;this.dragRightBounds=this.dragLeftBounds+(this.holderWidth-(this.sliderGrabber.clientWidth+2));var h={thisRef:this};if(r){imageOpacityVine.bind(this.grabberHolder,"touchstart",this.handleGrabberTouchstart,h);imageOpacityVine.bind(document,"touchend",this.handleGrabberTouchend,h);imageOpacityVine.bind(this.secondImage,"touchstart",this.handleImageTouchstart,h);imageOpacityVine.bind(this.secondImage,"touchmove",this.handleImageTouchmove,h)}else{imageOpacityVine.bind(this.grabberHolder,"mousedown",this.handleGrabberMouseDown,h);imageOpacityVine.bind(document,"mouseup",this.handleGrabberMouseUp,h)}imageOpacityVine.bind(window,"resize",this.handleWindowResize,h);imageOpacityVine.bind(a,"click",this.handleBeforeBtnClick,h);imageOpacityVine.bind(f,"click",this.handleAfterBtnClick,h)},handleGrabberMouseDown:function(e){e.preventDefault();clearInterval(e.data.thisRef.intervalID);if(!e.data.thisRef.beingDragged){e.data.thisRef.beingDragged=true;e.data.thisRef.dragPrevX=e.pageX;imageOpacityVine.bind(document,"mousemove",e.data.thisRef.updateGrabberMove,e.data)}},updateGrabberMove:function(e){var t=e.pageX;var n=t-e.data.thisRef.dragPrevX;var r=+e.data.thisRef.grabberHolder.style.left.replace(/[^-0-9\.]/g,"");var i=r+n;if(i<e.data.thisRef.dragLeftBounds){i=e.data.thisRef.dragLeftBounds}else if(i>e.data.thisRef.dragRightBounds){i=e.data.thisRef.dragRightBounds}e.data.thisRef.grabberHolder.style.left=i+"px";e.data.thisRef.dragPrevX=t;var s=Math.abs((i-e.data.thisRef.dragLeftBounds)/(e.data.thisRef.dragRightBounds-e.data.thisRef.dragLeftBounds)-1);e.data.thisRef.secondImage.style.opacity=s},handleGrabberMouseUp:function(e){imageOpacityVine.unbind(document,"mousemove",e.data.thisRef.updateGrabberMove);e.data.thisRef.beingDragged=false},handleGrabberTouchstart:function(e){e.preventDefault();clearInterval(e.data.thisRef.intervalID);if(!e.data.thisRef.beingDragged&&e.touches.length===1){e.data.thisRef.beingDragged=true;var t=e.touches[0];e.data.thisRef.dragPrevX=t.pageX;imageOpacityVine.bind(document,"touchmove",e.data.thisRef.handleGrabberTouchmove,e.data)}},handleGrabberTouchmove:function(e){if(e.data.thisRef.changeOpacityStep){var t=e.data.thisRef.grabberHolder;var n=e.touches[0];var r=n.pageX;var i=r-e.data.thisRef.dragPrevX;var s=+e.data.thisRef.grabberHolder.style.left.replace(/[^-0-9\.]/g,"");var o=s+i;if(o<e.data.thisRef.dragLeftBounds){o=e.data.thisRef.dragLeftBounds}else if(o>e.data.thisRef.dragRightBounds){o=e.data.thisRef.dragRightBounds}e.data.thisRef.grabberHolder.style.left=o+"px";e.data.thisRef.dragPrevX=r;var u=Math.abs((o-e.data.thisRef.dragLeftBounds)/(e.data.thisRef.dragRightBounds-e.data.thisRef.dragLeftBounds)-1);e.data.thisRef.secondImage.style.opacity=u;e.data.thisRef.changeOpacityStep=false}else{e.data.thisRef.changeOpacityStep=true}},handleGrabberTouchend:function(e){imageOpacityVine.unbind(document,"touchmove",e.data.thisRef.handleGrabberTouchmove);e.data.thisRef.beingDragged=false},handleImageTouchstart:function(e){e.preventDefault();clearInterval(e.data.thisRef.intervalID)},handleImageTouchmove:function(e){var t=e.touches[0].pageX-e.data.thisRef.holderLeft;var n=e.data.thisRef.secondImage.clientWidth;var r=t/n,i=Math.abs(r-1);e.data.thisRef.secondImage.style.opacity=i;var s=e.data.thisRef.dragRightBounds-e.data.thisRef.dragLeftBounds;var o=e.data.thisRef.dragLeftBounds+s*r;if(o>e.data.thisRef.dragRightBounds){o=e.data.thisRef.dragRightBounds}else if(o<e.data.thisRef.dragLeftBounds){o=e.data.thisRef.dragLeftBounds}e.data.thisRef.grabberHolder.style.left=o+"px"},handleBeforeBtnClick:function(e){e.data.thisRef.animateTargetOpacity=1;clearInterval(e.data.thisRef.intervalID);e.data.thisRef.intervalID=window.setInterval(e.data.thisRef.handleAnimateUpdate,100,e.data.thisRef)},handleAfterBtnClick:function(e){e.data.thisRef.animateTargetOpacity=0;clearInterval(e.data.thisRef.intervalID);e.data.thisRef.intervalID=window.setInterval(e.data.thisRef.handleAnimateUpdate,100,e.data.thisRef)},handleAnimateUpdate:function(e){var t=+e.secondImage.style.opacity;if(e.animateTargetOpacity){e.secondImage.style.opacity=+e.secondImage.style.opacity<1?+e.secondImage.style.opacity+e.animationStepChange:e.handleStopInterval(e,1)}else{e.secondImage.style.opacity=+e.secondImage.style.opacity>e.animationStepChange?+e.secondImage.style.opacity-e.animationStepChange:e.handleStopInterval(e,0)}var n=e.dragRightBounds-e.dragLeftBounds,r=Math.abs(+e.secondImage.style.opacity-1);var i=e.dragLeftBounds+n*r;if(i>e.dragRightBounds){i=e.dragRightBounds}else if(i<e.dragLeftBounds){i=e.dragLeftBounds}e.grabberHolder.style.left=i+"px"},handleStopInterval:function(e,t){clearInterval(e.intervalID);return t},handleWindowResize:function(e){if(e.data.thisRef.holder.clientWidth!==e.data.thisRef.holderWidth){e.data.thisRef.holderWidth=e.data.thisRef.holder.clientWidth;e.data.thisRef.dragRightBounds=e.data.thisRef.dragLeftBounds+(e.data.thisRef.holderWidth-(e.data.thisRef.sliderGrabber.clientWidth+2));var t=e.data.thisRef.dragRightBounds-e.data.thisRef.dragLeftBounds;var n=Math.abs(1-e.data.thisRef.secondImage.style.opacity);e.data.thisRef.grabberHolder.style.left=e.data.thisRef.dragLeftBounds+t*n+"px"}}}})()